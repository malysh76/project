/*
 * sin.c
 *
 *  Created on: 23.05.2011
 *      Author: 129
 */
#include "sin.h"
const unsigned short 	sin_tbl[16385] = {
										#include "sin.tbl"
										 };
const unsigned short 	atan_tbl[8193] ={
										#include "atan.tbl"
										};
//-----------------------------------------------------
// таблица для ограничения Iqin по мощности
//Pном отн = CtrlPwm[CPWM_VLC]ном * CtrlPwm[CPWM_IQIN]ном;
//CtrlPwm[CPWM_IQIN]n = Pном отн / CtrlPwm[CPWM_VLC]n;
//n - номер элемента массива соответствующий CtrlPwm[CPWM_VLC]n.
const  short	exp[SIZEOFEXP] =
{
		530,489,451,416,384,355,327,302,279,257,238,219,202,187,172,159,147,136,125,115,107,98,91,84,77,71,66,61,56,52,48,44,40,37,34,32,29,27,25,23,21,19,18,16,15,14,13,12,11,10,9,8,8,7,7,6,6,5,5,4,4,4,3,3,3,2,2,2,2,2,1,1,1,1,1,1,1,1,1,0
};
//----------------------------------------------------
// таблица формирования задания на 2,5 градуса
const short stepTask[SIZEOFTASK]=
{
#ifdef trans_5ms
		0,3,10,22,39,60,87,118,153,194,239,288,343,401,464,532,604,680,761,845,934,1027,1124,1224,1329,1437,1549,1664,1783,1905,2031,2159,2291,2425,2563,2703,2846,2991,3139,3289,3441,3596,3752,3910,4070,4232,4395,4559,4725,4892,5060,5228,5398,5568,5738,5910,6081,6253,6424,6596,6767,6939,7110,7280,7450,7619,7787,7955,8121,8287,8451,8614,8775,8936,9094,9251,9406,9560,9712,9862,10009,10155,10299,10440,10579,10716,10851,10983,11113,11241,11366,11488,11608,11725,11840,11952,12061,12167,12271,12373,12471,12567,12660,12751,12839,12924,13006,13086,13163,13238,13310,13379,13446,13510,13572,13632,13689,13743,13795,13845,13893,13939,13982,14023,14062,14100,14135,14168,14200,14229,14257,14283,14308,14331,14352,14373,14391,14409,14425,14439,14453,14466,14477,14487,14497,14506,14513,14520,14527,14532,14537,14542,14545,14549,14552,14554,14556,14558,14559,14561,14562,14562,14563,14563,14564,14564,14564
#endif
#ifdef trans_10ms
		0,0,2,5,9,14,21,29,38,48,59,72,86,101,117,134,152,172,193,215,238,262,287,314,342,370,400,431,463,497,531,566,603,641,679,719,760,801,844,888,933,979,1026,1074,1123,1173,1223,1275,1328,1381,1436,1491,1548,1605,1663,1722,1782,1843,1904,1966,2030,2093,2158,2224,2290,2357,2424,2493,2562,2632,2702,2773,2845,2917,2990,3064,3138,3213,3288,3364,3440,3517,3595,3673,3751,3830,3909,3989,4069,4150,4231,4312,4394,4476,4558,4641,4724,4807,4891,4974,5059,5143,5227,5312,5397,5482,5567,5652,5737,5823,5909,5994,6080,6166,6252,6337,6423,6509,6595,6681,6766,6852,6938,7023,7109,7194,7279,7364,7449,7533,7618,7702,7786,7870,7954,8037,8120,8203,8286,8368,8450,8532,8613,8694,8774,8855,8935,9014,9093,9172,9250,9328,9405,9482,9559,9635,9711,9786,9861,9935,10008,10081,10154,10226,10298,10369,10439,10509,10578,10647,10715,10783,10850,10917,10982,11048,11112,11176,11240,11302,11365,11426,11487,11547,11607,11666,11724,11782,11839,11895,11951,12005,12060,12113,12166,12219,12270,12321,12372,12421,12470,12519,12566,12613,12659,12705,12750,12794,12838,12881,12923,12964,13005,13046,13085,13124,13162,13200,13237,13273,13309,13344,13378,13412,13445,13477,13509,13541,13571,13601,13631,13659,13688,13715,13742,13769,13794,13820,13844,13868,13892,13915,13938,13960,13981,14002,14022,14042,14061,14080,14099,14116,14134,14151,14167,14183,14199,14214,14228,14242,14256,14269,14282,14295,14307,14319,14330,14341,14351,14362,14372,14381,14390,14399,14408,14416,14424,14431,14438,14445,14452,14458,14465,14470,14476,14481,14486,14491,14496,14500,14505,14509,14512,14516,14519,14523,14526,14529,14531,14534,14536,14538,14541,14543,14544,14546,14548,14549,14551,14552,14553,14554,14555,14556,14557,14558,14558,14559,14560,14560,14561,14561,14561,14562,14562,14562,14562,14563,14563,14563,14563,14563,14563,14563
#endif
#ifdef trans_debug
		14563
#endif
#ifdef trans_13ms
		0,0,0,1,3,4,6,9,12,15,18,22,27,31,36,42,48,54,60,67,75,82,90,99,108,117,126,136,147,157,168,180,192,204,216,229,243,256,271,285,300,315,331,347,363,380,397,414,432,450,469,488,507,527,547,567,588,609,631,653,675,698,721,744,768,793,817,842,867,893,919,946,973,1000,1027,1055,1084,1112,1141,1171,1201,1231,1262,1293,1324,1356,1388,1420,1453,1486,1520,1554,1588,1623,1658,1693,1729,1766,1802,1839,1876,1914,1952,1991,2030,2069,2108,2148,2189,2229,2271,2312,2354,2396,2439,2482,2525,2569,2613,2657,2702,2748,2793,2839,2885,2932,2979,3027,3075,3123,3172,3221,3270,3320,3370,3420,3471,3522,3574,3626,3678,3731,3784,3838,3892,3946,4000,4055,4111,4167,4223,4279,4336,4393,4451,4509,4567,4626,4685,4745,4804,4865,4925,4986,5048,5109,5172,5234,5297,5360,5424,5488,5552,5617,5682,5748,5814,5880,5946,6013,6081,6149,6217,6285,6354,6423,6493,6563,6633,6704,6775,6847,6919,6991,7064,7137,7210,7284,7357,7431,7504,7576,7649,7721,7792,7863,7934,8004,8074,8144,8213,8282,8350,8419,8486,8554,8621,8687,8753,8819,8885,8950,9015,9079,9143,9207,9270,9333,9395,9457,9519,9580,9641,9702,9762,9822,9881,9941,9999,10058,10116,10173,10230,10287,10344,10400,10456,10511,10566,10621,10675,10729,10782,10835,10888,10940,10992,11044,11095,11146,11196,11246,11296,11345,11394,11443,11491,11539,11587,11634,11680,11727,11773,11818,11863,11908,11953,11997,12041,12084,12127,12169,12212,12253,12295,12336,12377,12417,12457,12497,12536,12575,12613,12651,12689,12726,12763,12800,12836,12872,12907,12942,12977,13011,13045,13079,13112,13145,13177,13209,13241,13272,13303,13334,13364,13394,13423,13452,13481,13509,13537,13565,13592,13619,13645,13671,13697,13722,13747,13772,13796,13820,13843,13866,13889,13911,13933,13955,13976,13997,14017,14037,14057,14076,14095,14114,14132,14150,14167,14184,14201,14217,14233,14249,14264,14279,14293,14307,14321,14334,14347,14360,14372,14384,14395,14406,14417,14427,14437,14447,14456,14465,14473,14481,14489,14496,14503,14510,14516,14522,14527,14532,14537,14541,14545,14549,14552,14554,14557,14559,14561,14562,14563,14563
#endif
#ifdef trans_13ms_m
		0,0,0,1,3,4,6,9,12,15,18,22,27,31,36,42,48,54,60,67,75,82,90,99,108,117,126,136,147,157,168,180,192,204,216,229,243,256,271,285,300,315,331,347,363,380,397,414,432,450,469,488,507,527,547,567,588,609,631,653,675,698,721,744,768,793,817,842,867,893,919,946,973,1000,1027,1055,1084,1112,1141,1171,1201,1231,1262,1293,1324,1356,1388,1420,1453,1486,1520,1554,1588,1623,1658,1693,1729,1766,1802,1839,1876,1914,1952,1991,2030,2069,2108,2148,2189,2229,2271,2312,2354,2396,2439,2482,2525,2569,2613,2657,2702,2748,2793,2839,2885,2932,2979,3027,3075,3123,3172,3221,3270,3320,3370,3420,3471,3522,3574,3626,3678,3731,3784,3838,3892,3946,4000,4055,4111,4167,4223,4279,4336,4393,4451,4509,4567,4626,4685,4745,4804,4865,4925,4986,5048,5109,5172,5234,5297,5360,5424,5488,5552,5617,5682,5748,5814,5880,5946,6013,6081,6149,6217,6285,6354,6423,6493,6563,6633,6704,6775,6847,6919,6991,7064,7137,7210,7284,7357,7431,7504,7576,7649,7721,7792,7863,7934,8004,8074,8144,8213,8282,8350,8419,8486,8554,8621,8687,8753,8819,8885,8950,9015,9079,9143,9207,9270,9333,9395,9457,9519,9580,9641,9702,9762,9822,9881,9941,9999,10058,10116,10173,10230,10287,10344,10400,10456,10511,10566,10621,10675,10729,10782,10835,10888,10940,10992,11044,11095,11146,11196,11246,11296,11345,11394,11443,11491,11539,11587,11634,11680,11727,11773,11818,11863,11908,11953,11997,12041,12084,12127,12169,12212,12253,12295,12336,12377,12417,12457,12497,12536,12575,12613,12651,12689,12726,12763,12800,12836,12872,12907,12942,12977,13011,13045,13079,13112,13145,13177,13209,13241,13272,13303,13334,13364,13394,13423,13452,13481,13509,13537,13565,13592,13619,13645,13671,13697,13722,13747,13772,13796,13820,13843,13866,13889,13911,13933,13955,13976,13997,14017,14037,14057,14076,14095,14114,14132,14150,14167,14184,14201,14217,14233,14249,14264,14279,14293,14307,14321,14334,14347,14360,14372,14384,14395,14406,14417,14427,14437,14447,14456,14465,14473,14481,14489,14496,14503,14510,14516,14522,14527,14532,14537,14541,14545,14549,14552,14554,14557,14559,14561,14562,14563,14563
#endif
};
